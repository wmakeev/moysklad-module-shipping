function init() {

  function startModule(define, taistApi, entryPoint) {
    // Build time: Tue Jul 28 2015 22:31:09 GMT+0500 (UZT)
define("@wmakeev/moysklad-module-shipping@0.0.8", ["multiver!lodash@^3.0.0","multiver!moysklad-router@^0.3.2"], function() {
  var global = window;
  var __args__ = arguments;
  var require = (function() {
    var deps = ["lodash@^3.0.0","moysklad-router@^0.3.2"].reduce(function(res, dep, index) {
      res[dep] = index;
      return res;
    }, {});
    return function(name) {
      if (name in deps) {
        return __args__[deps[name]];
      } else {
        var err = new Error("Cannot find module '" + name + "'");
        err.code = 'MODULE_NOT_FOUND';
        throw err;
      }
    }
  })();

  return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = moyskladShippingModule;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = __webpack_require__(1);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _moyskladClient = __webpack_require__(2);\n\nvar _moyskladClient2 = _interopRequireDefault(_moyskladClient);\n\nvar _moyskladRouter = __webpack_require__(3);\n\nvar _moyskladRouter2 = _interopRequireDefault(_moyskladRouter);\n\nvar _menuHandler = __webpack_require__(4);\n\nvar _menuHandler2 = _interopRequireDefault(_menuHandler);\n\n// Шаблон элемента меню\nvar menuItem = {\n  type: 'MenuItem',\n  name: 'Заявка на доставку'\n};\n\nfunction moyskladShippingModule(sb) {\n  return {\n    init: function init() {\n      sb.client = _moyskladClient2['default'].createClient();\n      sb.router = new _moyskladRouter2['default']().start();\n      sb.once('destroy', function () {\n        return sb.router.stop();\n      });\n      sb.UI.add([\n\n      // Добавляем пункт меню в раздел \"Заказы покупателей\"\n      _lodash2['default'].extend({}, menuItem, {\n        menu: 'Создать',\n        appContext: 'customerorder',\n        handler: _menuHandler2['default'].bind(sb)\n      }),\n\n      // Добавляем пункт меню в редактор \"Заказ покупателя\"\n      _lodash2['default'].extend({}, menuItem, {\n        menu: 'Действия',\n        appContext: 'customerorder/edit',\n        handler: _menuHandler2['default'].bind(sb)\n      })]);\n    },\n\n    // TODO destroy: sb.destroy,\n    destroy: function destroy() {\n      sb.emit('destroy');\n    }\n  };\n}\n\nmodule.exports = exports['default'];//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanM/OTU1MiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFXd0Isc0JBQXNCOzs7O2tDQVhyQixDQUFROzs7OzBDQUNSLENBQWlCOzs7OzBDQUNqQixDQUFpQjs7Ozt1Q0FDakIsQ0FBZ0I7Ozs7O0FBR3pDLElBQU0sUUFBUSxHQUFHO0FBQ2YsTUFBSSxFQUFFLFVBQVU7QUFDaEIsTUFBSSxFQUFFLG9CQUFvQjtDQUMzQixDQUFDOztBQUVhLFNBQVMsc0JBQXNCLENBQUMsRUFBRSxFQUFFO0FBQ2pELFNBQU87QUFDTCxRQUFJLGtCQUFHO0FBQ0wsUUFBRSxDQUFDLE1BQU0sR0FBRyw0QkFBUyxZQUFZLEVBQUUsQ0FBQztBQUNwQyxRQUFFLENBQUMsTUFBTSxHQUFJLGlDQUFZLENBQUUsS0FBSyxFQUFFLENBQUM7QUFDbkMsUUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUU7ZUFBTSxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRTtPQUFBLENBQUMsQ0FBQztBQUMzQyxRQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQzs7O0FBR1IsMEJBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUU7QUFDckIsWUFBSSxFQUFFLFNBQVM7QUFDZixrQkFBVSxFQUFFLGVBQWU7QUFDM0IsZUFBTyxFQUFFLHlCQUFZLElBQUksQ0FBQyxFQUFFLENBQUM7T0FDOUIsQ0FBQzs7O0FBR0YsMEJBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUU7QUFDckIsWUFBSSxFQUFFLFVBQVU7QUFDaEIsa0JBQVUsRUFBRSxvQkFBb0I7QUFDaEMsZUFBTyxFQUFFLHlCQUFZLElBQUksQ0FBQyxFQUFFLENBQUM7T0FDOUIsQ0FBQyxDQUNILENBQUMsQ0FBQztLQUNKOzs7QUFHRCxXQUFPLHFCQUFHO0FBQ1IsUUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztLQUNwQjtHQUNGLENBQUM7Q0FDSCIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gICAgICAgICAgICBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IG1veXNrbGFkICAgICBmcm9tICdtb3lza2xhZC1jbGllbnQnO1xuaW1wb3J0IFJvdXRlciAgICAgICBmcm9tICdtb3lza2xhZC1yb3V0ZXInO1xuaW1wb3J0IG1lbnVIYW5kbGVyICBmcm9tICcuL21lbnUtaGFuZGxlcic7XG5cbi8vINCo0LDQsdC70L7QvSDRjdC70LXQvNC10L3RgtCwINC80LXQvdGOXG5jb25zdCBtZW51SXRlbSA9IHtcbiAgdHlwZTogJ01lbnVJdGVtJyxcbiAgbmFtZTogJ9CX0LDRj9Cy0LrQsCDQvdCwINC00L7RgdGC0LDQstC60YMnLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbW95c2tsYWRTaGlwcGluZ01vZHVsZShzYikge1xuICByZXR1cm4ge1xuICAgIGluaXQoKSB7XG4gICAgICBzYi5jbGllbnQgPSBtb3lza2xhZC5jcmVhdGVDbGllbnQoKTtcbiAgICAgIHNiLnJvdXRlciA9IChuZXcgUm91dGVyKCkpLnN0YXJ0KCk7XG4gICAgICBzYi5vbmNlKCdkZXN0cm95JywgKCkgPT4gc2Iucm91dGVyLnN0b3AoKSk7XG4gICAgICBzYi5VSS5hZGQoW1xuXG4gICAgICAgIC8vINCU0L7QsdCw0LLQu9GP0LXQvCDQv9GD0L3QutGCINC80LXQvdGOINCyINGA0LDQt9C00LXQuyBcItCX0LDQutCw0LfRiyDQv9C+0LrRg9C/0LDRgtC10LvQtdC5XCJcbiAgICAgICAgXy5leHRlbmQoe30sIG1lbnVJdGVtLCB7XG4gICAgICAgICAgbWVudTogJ9Ch0L7Qt9C00LDRgtGMJyxcbiAgICAgICAgICBhcHBDb250ZXh0OiAnY3VzdG9tZXJvcmRlcicsXG4gICAgICAgICAgaGFuZGxlcjogbWVudUhhbmRsZXIuYmluZChzYiksXG4gICAgICAgIH0pLFxuXG4gICAgICAgIC8vINCU0L7QsdCw0LLQu9GP0LXQvCDQv9GD0L3QutGCINC80LXQvdGOINCyINGA0LXQtNCw0LrRgtC+0YAgXCLQl9Cw0LrQsNC3INC/0L7QutGD0L/QsNGC0LXQu9GPXCJcbiAgICAgICAgXy5leHRlbmQoe30sIG1lbnVJdGVtLCB7XG4gICAgICAgICAgbWVudTogJ9CU0LXQudGB0YLQstC40Y8nLFxuICAgICAgICAgIGFwcENvbnRleHQ6ICdjdXN0b21lcm9yZGVyL2VkaXQnLFxuICAgICAgICAgIGhhbmRsZXI6IG1lbnVIYW5kbGVyLmJpbmQoc2IpLFxuICAgICAgICB9KSxcbiAgICAgIF0pO1xuICAgIH0sXG5cbiAgICAvLyBUT0RPIGRlc3Ryb3k6IHNiLmRlc3Ryb3ksXG4gICAgZGVzdHJveSgpIHtcbiAgICAgIHNiLmVtaXQoJ2Rlc3Ryb3knKTtcbiAgICB9LFxuICB9O1xufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvaW5kZXguanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 1 */
/***/ function(module, exports) {

	eval("module.exports = require(\"lodash@^3.0.0\");//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJyZXF1aXJlKFxcXCJsb2Rhc2hAXjMuMC4wXFxcIilcIj9lZTY2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJsb2Rhc2hAXjMuMC4wXCIpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJyZXF1aXJlKFxcXCJsb2Rhc2hAXjMuMC4wXFxcIilcIlxuICoqIG1vZHVsZSBpZCA9IDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 2 */
/***/ function(module, exports) {

	eval("module.exports = window.require(\"moysklad-client\");;//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ3aW5kb3cucmVxdWlyZShcXFwibW95c2tsYWQtY2xpZW50XFxcIik7XCI/ZTM2ZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSB3aW5kb3cucmVxdWlyZShcIm1veXNrbGFkLWNsaWVudFwiKTs7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcIndpbmRvdy5yZXF1aXJlKFxcXCJtb3lza2xhZC1jbGllbnRcXFwiKTtcIlxuICoqIG1vZHVsZSBpZCA9IDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 3 */
/***/ function(module, exports) {

	eval("module.exports = require(\"moysklad-router@^0.3.2\");//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJyZXF1aXJlKFxcXCJtb3lza2xhZC1yb3V0ZXJAXjAuMy4yXFxcIilcIj84YTg5Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJtb3lza2xhZC1yb3V0ZXJAXjAuMy4yXCIpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJyZXF1aXJlKFxcXCJtb3lza2xhZC1yb3V0ZXJAXjAuMy4yXFxcIilcIlxuICoqIG1vZHVsZSBpZCA9IDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 4 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = menuHandler;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _requestConfirmation = __webpack_require__(5);\n\nvar _requestConfirmation2 = _interopRequireDefault(_requestConfirmation);\n\n/**\n * Обработчик нажатия на пункт меню\n *\n * @param {object} Элемент нажатого пункта меню\n * @returns {Promise} Promise\n */\n\nfunction menuHandler(_ref) {\n  var appContext = _ref.appContext;\n  var ordersUuids, orders;\n  return regeneratorRuntime.async(function menuHandler$(context$1$0) {\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        if (!(appContext === 'customerorder')) {\n          context$1$0.next = 6;\n          break;\n        }\n\n        context$1$0.next = 3;\n        return regeneratorRuntime.awrap(this.UI.getSelectedRowsUuids());\n\n      case 3:\n        context$1$0.t0 = context$1$0.sent;\n        context$1$0.next = 7;\n        break;\n\n      case 6:\n        context$1$0.t0 = [this.router.getQuery().id];\n\n      case 7:\n        ordersUuids = context$1$0.t0;\n\n        if (!(ordersUuids.length > 0)) {\n          context$1$0.next = 16;\n          break;\n        }\n\n        context$1$0.next = 11;\n        return regeneratorRuntime.awrap(this.client.from('customerOrder').uuids(ordersUuids).load());\n\n      case 11:\n        orders = context$1$0.sent;\n\n        this.client.createLazyLoader().attach(orders, ['Position.good', 'sourceAgent']);\n        _requestConfirmation2['default'].call(this, orders);\n        context$1$0.next = 17;\n        break;\n\n      case 16:\n        // Ошибка не должна возникать т.к.\n        // меню 'Создать' не активно когда докумены не выбраны\n        this.UI.error(new Error('Заказы не выбраны'));\n\n      case 17:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, this);\n}\n\nmodule.exports = exports['default'];//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbWVudS1oYW5kbGVyLmpzPzQ5NzciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBUThCLFdBQVc7Ozs7K0NBUlQsQ0FBd0I7Ozs7Ozs7Ozs7O0FBUXpDLFNBQWUsV0FBVyxDQUFDLElBQWM7TUFBWixVQUFVLEdBQVosSUFBYyxDQUFaLFVBQVU7TUFDaEQsV0FBVyxFQUtULE1BQU07Ozs7Y0FMTSxVQUFVLEtBQUssZUFBZTs7Ozs7O3dDQUN0QyxJQUFJLENBQUMsRUFBRSxDQUFDLG9CQUFvQixFQUFFOzs7Ozs7Ozt5QkFDcEMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQzs7O0FBRjNCLG1CQUFXOztjQUlYLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQzs7Ozs7O3dDQUNMLElBQUksQ0FBQyxNQUFNLENBQzNCLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsSUFBSSxFQUFFOzs7QUFEOUMsY0FBTTs7QUFFVixZQUFJLENBQUMsTUFBTSxDQUNSLGdCQUFnQixFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLGVBQWUsRUFBRSxhQUFhLENBQUMsQ0FBQyxDQUFDO0FBQ3ZFLHlDQUFvQixJQUFJLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDOzs7Ozs7O0FBS3ZDLFlBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQzs7Ozs7OztDQUVqRCIsImZpbGUiOiI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJlcXVlc3RDb25maXJtYXRpb24gZnJvbSAnLi9yZXF1ZXN0LWNvbmZpcm1hdGlvbic7XG5cbi8qKlxuICog0J7QsdGA0LDQsdC+0YLRh9C40Log0L3QsNC20LDRgtC40Y8g0L3QsCDQv9GD0L3QutGCINC80LXQvdGOXG4gKlxuICogQHBhcmFtIHtvYmplY3R9INCt0LvQtdC80LXQvdGCINC90LDQttCw0YLQvtCz0L4g0L/Rg9C90LrRgtCwINC80LXQvdGOXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gUHJvbWlzZVxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBtZW51SGFuZGxlcih7IGFwcENvbnRleHQgfSkge1xuICBsZXQgb3JkZXJzVXVpZHMgPSBhcHBDb250ZXh0ID09PSAnY3VzdG9tZXJvcmRlcidcbiAgICA/IGF3YWl0IHRoaXMuVUkuZ2V0U2VsZWN0ZWRSb3dzVXVpZHMoKVxuICAgIDogW3RoaXMucm91dGVyLmdldFF1ZXJ5KCkuaWRdO1xuXG4gIGlmIChvcmRlcnNVdWlkcy5sZW5ndGggPiAwKSB7XG4gICAgbGV0IG9yZGVycyA9IGF3YWl0IHRoaXMuY2xpZW50XG4gICAgICAuZnJvbSgnY3VzdG9tZXJPcmRlcicpLnV1aWRzKG9yZGVyc1V1aWRzKS5sb2FkKCk7XG4gICAgdGhpcy5jbGllbnRcbiAgICAgIC5jcmVhdGVMYXp5TG9hZGVyKCkuYXR0YWNoKG9yZGVycywgWydQb3NpdGlvbi5nb29kJywgJ3NvdXJjZUFnZW50J10pO1xuICAgIHJlcXVlc3RDb25maXJtYXRpb24uY2FsbCh0aGlzLCBvcmRlcnMpO1xuICB9XG4gIGVsc2Uge1xuICAgIC8vINCe0YjQuNCx0LrQsCDQvdC1INC00L7Qu9C20L3QsCDQstC+0LfQvdC40LrQsNGC0Ywg0YIu0LouXG4gICAgLy8g0LzQtdC90Y4gJ9Ch0L7Qt9C00LDRgtGMJyDQvdC1INCw0LrRgtC40LLQvdC+INC60L7Qs9C00LAg0LTQvtC60YPQvNC10L3RiyDQvdC1INCy0YvQsdGA0LDQvdGLXG4gICAgdGhpcy5VSS5lcnJvcihuZXcgRXJyb3IoJ9CX0LDQutCw0LfRiyDQvdC1INCy0YvQsdGA0LDQvdGLJykpO1xuICB9XG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9tZW51LWhhbmRsZXIuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 5 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = requestConfirmation;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _normalizeOrder = __webpack_require__(6);\n\nvar _normalizeOrder2 = _interopRequireDefault(_normalizeOrder);\n\n/**\n * Выводит диалог подтверждения отправки заказов\n *\n * @param   {array} orders  список заказов МойСклад\n * @returns {array}         результат процесса подтвержения\n * @this                    sandbox\n */\n\nfunction requestConfirmation(orders) {\n  var normOrders, results;\n  return regeneratorRuntime.async(function requestConfirmation$(context$1$0) {\n    var _this = this;\n\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        context$1$0.next = 2;\n        return regeneratorRuntime.awrap(Promise.all(orders.map(function (order) {\n          return _normalizeOrder2['default'].call(_this, order);\n        })));\n\n      case 2:\n        normOrders = context$1$0.sent;\n        context$1$0.next = 5;\n        return regeneratorRuntime.awrap(this.sendRequest(normOrders.map(function (normOrder) {\n          return { order: normOrder };\n        })));\n\n      case 5:\n        results = context$1$0.sent;\n\n        this.log.debug(results);\n        this.UI.alert('Заявки отправлены в службу доставки');\n        return context$1$0.abrupt('return', results);\n\n      case 9:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, this);\n}\n\nmodule.exports = exports['default'];\n\n// TODO Подтвердить правильность данных заказов через внешний интерфейс\n\n// TODO Для каждого заказа может быть отдельная служба доставки\n// .. разбить на группы, но отправлять надо не по одному//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVxdWVzdC1jb25maXJtYXRpb24uanM/NzFhMSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFTOEIsbUJBQW1COzs7OzBDQVR0QixDQUFtQjs7Ozs7Ozs7Ozs7O0FBUy9CLFNBQWUsbUJBQW1CLENBQUMsTUFBTTtNQUNsRCxVQUFVLEVBS1YsT0FBTzs7Ozs7OztvREFMYSxNQUFNLENBQUMsR0FBRyxDQUFDLGVBQUs7aUJBQUksNEJBQWUsSUFBSSxRQUFPLEtBQUssQ0FBQztTQUFBLENBQUM7OztBQUF6RSxrQkFBVTs7d0NBS00sSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLG1CQUFTLEVBQUk7QUFDL0QsaUJBQU8sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLENBQUM7U0FDN0IsQ0FBQyxDQUFDOzs7QUFGQyxlQUFPOztBQUlYLFlBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3hCLFlBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLHFDQUFxQyxDQUFDLENBQUM7NENBQzlDLE9BQU87Ozs7Ozs7Q0FDZiIsImZpbGUiOiI1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG5vcm1hbGl6ZU9yZGVyIGZyb20gJy4vbm9ybWFsaXplLW9yZGVyJztcblxuLyoqXG4gKiDQktGL0LLQvtC00LjRgiDQtNC40LDQu9C+0LMg0L/QvtC00YLQstC10YDQttC00LXQvdC40Y8g0L7RgtC/0YDQsNCy0LrQuCDQt9Cw0LrQsNC30L7QslxuICpcbiAqIEBwYXJhbSAgIHthcnJheX0gb3JkZXJzICDRgdC/0LjRgdC+0Log0LfQsNC60LDQt9C+0LIg0JzQvtC50KHQutC70LDQtFxuICogQHJldHVybnMge2FycmF5fSAgICAgICAgINGA0LXQt9GD0LvRjNGC0LDRgiDQv9GA0L7RhtC10YHRgdCwINC/0L7QtNGC0LLQtdGA0LbQtdC90LjRj1xuICogQHRoaXMgICAgICAgICAgICAgICAgICAgIHNhbmRib3hcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdENvbmZpcm1hdGlvbihvcmRlcnMpIHtcbiAgbGV0IG5vcm1PcmRlcnMgPSBhd2FpdCogb3JkZXJzLm1hcChvcmRlciA9PiBub3JtYWxpemVPcmRlci5jYWxsKHRoaXMsIG9yZGVyKSk7XG4gIC8vIFRPRE8g0J/QvtC00YLQstC10YDQtNC40YLRjCDQv9GA0LDQstC40LvRjNC90L7RgdGC0Ywg0LTQsNC90L3Ri9GFINC30LDQutCw0LfQvtCyINGH0LXRgNC10Lcg0LLQvdC10YjQvdC40Lkg0LjQvdGC0LXRgNGE0LXQudGBXG5cbiAgLy8gVE9ETyDQlNC70Y8g0LrQsNC20LTQvtCz0L4g0LfQsNC60LDQt9CwINC80L7QttC10YIg0LHRi9GC0Ywg0L7RgtC00LXQu9GM0L3QsNGPINGB0LvRg9C20LHQsCDQtNC+0YHRgtCw0LLQutC4XG4gIC8vIC4uINGA0LDQt9Cx0LjRgtGMINC90LAg0LPRgNGD0L/Qv9GLLCDQvdC+INC+0YLQv9GA0LDQstC70Y/RgtGMINC90LDQtNC+INC90LUg0L/QviDQvtC00L3QvtC80YNcbiAgbGV0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLnNlbmRSZXF1ZXN0KG5vcm1PcmRlcnMubWFwKG5vcm1PcmRlciA9PiB7XG4gICAgcmV0dXJuIHsgb3JkZXI6IG5vcm1PcmRlciB9O1xuICB9KSk7XG5cbiAgdGhpcy5sb2cuZGVidWcocmVzdWx0cyk7XG4gIHRoaXMuVUkuYWxlcnQoJ9CX0LDRj9Cy0LrQuCDQvtGC0L/RgNCw0LLQu9C10L3RiyDQsiDRgdC70YPQttCx0YMg0LTQvtGB0YLQsNCy0LrQuCcpO1xuICByZXR1cm4gcmVzdWx0cztcbn1cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3JlcXVlc3QtY29uZmlybWF0aW9uLmpzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 6 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = normalizeOrder;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _slicedToArray(arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }\n\nvar _normalizeOrderPositions = __webpack_require__(7);\n\nvar _normalizeOrderPositions2 = _interopRequireDefault(_normalizeOrderPositions);\n\nvar _normalizeOrderCustomer = __webpack_require__(8);\n\nvar _normalizeOrderCustomer2 = _interopRequireDefault(_normalizeOrderCustomer);\n\n/**\n * Преобразует заказ покупателя из объекта МойСклад во внутренний формат\n *\n * @param   {Array}   order заказ покупателя\n * @returns {Promise} нормализованный заказ\n * @this              sandbox\n */\n\nfunction normalizeOrder(order) {\n  var normOrder, _ref, _ref2;\n\n  return regeneratorRuntime.async(function normalizeOrder$(context$1$0) {\n    var _this = this;\n\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        if (order) {\n          context$1$0.next = 2;\n          break;\n        }\n\n        throw new Error('normalizeOrderData: list of orders not specified');\n\n      case 2:\n        normOrder = {\n          name: order.name\n        };\n        context$1$0.t0 = _normalizeOrderPositions2['default'].call(this, order.customerOrderPosition);\n        context$1$0.next = 6;\n        return regeneratorRuntime.awrap(order.sourceAgent);\n\n      case 6:\n        context$1$0.t1 = context$1$0.sent;\n        context$1$0.t2 = _normalizeOrderCustomer2['default'].call(this, context$1$0.t1);\n        context$1$0.t3 = Promise.all([context$1$0.t0, context$1$0.t2]);\n        context$1$0.next = 11;\n        return regeneratorRuntime.awrap(context$1$0.t3);\n\n      case 11:\n        _ref = context$1$0.sent;\n        _ref2 = _slicedToArray(_ref, 2);\n        normOrder.goods = _ref2[0];\n        normOrder.customer = _ref2[1];\n\n        // Отбрасываем услуги, выделяем стоимость доставки\n        normOrder.goods = normOrder.goods.filter(function (good) {\n          if (good.type !== 'service') {\n            return true;\n          }\n          if (good.uuid === _this.options.shippingServiceUuid) {\n            normOrder.shippingCost = good.price;\n          }\n          return false;\n        });\n\n        return context$1$0.abrupt('return', normOrder);\n\n      case 17:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, this);\n}\n\nmodule.exports = exports['default'];//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbm9ybWFsaXplLW9yZGVyLmpzPzEyNzYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBVThCLGNBQWM7Ozs7OzttREFWUixDQUE2Qjs7OztrREFDN0IsQ0FBNEI7Ozs7Ozs7Ozs7OztBQVNqRCxTQUFlLGNBQWMsQ0FBQyxLQUFLO01BSzVDLFNBQVM7Ozs7Ozs7WUFKUixLQUFLOzs7OztjQUNGLElBQUksS0FBSyxDQUFDLGtEQUFrRCxDQUFDOzs7QUFHakUsaUJBQVMsR0FBRztBQUNkLGNBQUksRUFBRSxLQUFLLENBQUMsSUFBSTtTQUNqQjt5QkFHQyxxQ0FBd0IsSUFBSSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMscUJBQXFCLENBQUM7O3dDQUN2QixLQUFLLENBQUMsV0FBVzs7Ozt5QkFBekQsb0NBQXVCLElBQUksQ0FBQyxJQUFJOzs7Ozs7OztBQUZqQyxpQkFBUyxDQUFDLEtBQUs7QUFBRSxpQkFBUyxDQUFDLFFBQVE7OztBQU1wQyxpQkFBUyxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxjQUFJLEVBQUk7QUFDL0MsY0FBSSxJQUFJLENBQUMsSUFBSSxLQUFLLFNBQVMsRUFBRTtBQUMzQixtQkFBTyxJQUFJLENBQUM7V0FDYjtBQUNELGNBQUksSUFBSSxDQUFDLElBQUksS0FBSyxNQUFLLE9BQU8sQ0FBQyxtQkFBbUIsRUFBRTtBQUNsRCxxQkFBUyxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1dBQ3JDO0FBQ0QsaUJBQU8sS0FBSyxDQUFDO1NBQ2QsQ0FBQyxDQUFDOzs0Q0FFSSxTQUFTOzs7Ozs7O0NBQ2pCIiwiZmlsZSI6IjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbm9ybWFsaXplT3JkZXJQb3NpdGlvbnMgZnJvbSAnLi9ub3JtYWxpemUtb3JkZXItcG9zaXRpb25zJztcbmltcG9ydCBub3JtYWxpemVPcmRlckN1c3RvbWVyICBmcm9tICcuL25vcm1hbGl6ZS1vcmRlci1jdXN0b21lcic7XG5cbi8qKlxuICog0J/RgNC10L7QsdGA0LDQt9GD0LXRgiDQt9Cw0LrQsNC3INC/0L7QutGD0L/QsNGC0LXQu9GPINC40Lcg0L7QsdGK0LXQutGC0LAg0JzQvtC50KHQutC70LDQtCDQstC+INCy0L3Rg9GC0YDQtdC90L3QuNC5INGE0L7RgNC80LDRglxuICpcbiAqIEBwYXJhbSAgIHtBcnJheX0gICBvcmRlciDQt9Cw0LrQsNC3INC/0L7QutGD0L/QsNGC0LXQu9GPXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0g0L3QvtGA0LzQsNC70LjQt9C+0LLQsNC90L3Ri9C5INC30LDQutCw0LdcbiAqIEB0aGlzICAgICAgICAgICAgICBzYW5kYm94XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIG5vcm1hbGl6ZU9yZGVyKG9yZGVyKSB7XG4gIGlmICghb3JkZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ25vcm1hbGl6ZU9yZGVyRGF0YTogbGlzdCBvZiBvcmRlcnMgbm90IHNwZWNpZmllZCcpO1xuICB9XG5cbiAgbGV0IG5vcm1PcmRlciA9IHtcbiAgICBuYW1lOiBvcmRlci5uYW1lLFxuICB9O1xuXG4gIFtub3JtT3JkZXIuZ29vZHMsIG5vcm1PcmRlci5jdXN0b21lcl0gPSBhd2FpdCogW1xuICAgIG5vcm1hbGl6ZU9yZGVyUG9zaXRpb25zLmNhbGwodGhpcywgb3JkZXIuY3VzdG9tZXJPcmRlclBvc2l0aW9uKSxcbiAgICBub3JtYWxpemVPcmRlckN1c3RvbWVyLmNhbGwodGhpcywgYXdhaXQgb3JkZXIuc291cmNlQWdlbnQpLFxuICBdO1xuXG4gIC8vINCe0YLQsdGA0LDRgdGL0LLQsNC10Lwg0YPRgdC70YPQs9C4LCDQstGL0LTQtdC70Y/QtdC8INGB0YLQvtC40LzQvtGB0YLRjCDQtNC+0YHRgtCw0LLQutC4XG4gIG5vcm1PcmRlci5nb29kcyA9IG5vcm1PcmRlci5nb29kcy5maWx0ZXIoZ29vZCA9PiB7XG4gICAgaWYgKGdvb2QudHlwZSAhPT0gJ3NlcnZpY2UnKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGdvb2QudXVpZCA9PT0gdGhpcy5vcHRpb25zLnNoaXBwaW5nU2VydmljZVV1aWQpIHtcbiAgICAgIG5vcm1PcmRlci5zaGlwcGluZ0Nvc3QgPSBnb29kLnByaWNlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xuXG4gIHJldHVybiBub3JtT3JkZXI7XG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9ub3JtYWxpemUtb3JkZXIuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 7 */
/***/ function(module, exports) {

	eval("'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = normalizeOrderPositions;\n\nfunction normalizeOrderPositions(customerOrderPositions) {\n  return regeneratorRuntime.async(function normalizeOrderPositions$(context$1$0) {\n    var _this = this;\n\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        context$1$0.next = 2;\n        return regeneratorRuntime.awrap(Promise.all(customerOrderPositions\n        // Преобразуем во внутренний формат\n        .map(function callee$1$0(position) {\n          var positionGood;\n          return regeneratorRuntime.async(function callee$1$0$(context$2$0) {\n            while (1) switch (context$2$0.prev = context$2$0.next) {\n              case 0:\n                context$2$0.next = 2;\n                return regeneratorRuntime.awrap(position.good);\n\n              case 2:\n                positionGood = context$2$0.sent;\n                return context$2$0.abrupt('return', {\n                  name: positionGood.name,\n                  type: positionGood.instanceOf('service') ? 'service' : 'good',\n                  uuid: position.goodUuid,\n                  article: positionGood.productCode,\n                  quantity: position.quantity,\n                  weight: positionGood.weight,\n                  volume: positionGood.volume,\n                  price: position.price.sum\n                });\n\n              case 4:\n              case 'end':\n                return context$2$0.stop();\n            }\n          }, null, _this);\n        })));\n\n      case 2:\n        return context$1$0.abrupt('return', context$1$0.sent);\n\n      case 3:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, this);\n}\n\nmodule.exports = exports['default'];\n\n// Используем параллельную загрузку полей//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbm9ybWFsaXplLW9yZGVyLXBvc2l0aW9ucy5qcz8xNjEwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O3FCQUE4Qix1QkFBdUI7O0FBQXRDLFNBQWUsdUJBQXVCLENBQUMsc0JBQXNCOzs7Ozs7O29EQUM1RCxzQkFBc0I7O1NBRWpDLEdBQUcsQ0FBQyxvQkFBTSxRQUFRO2NBRWIsWUFBWTs7Ozs7Z0RBQVMsUUFBUSxDQUFDLElBQUk7OztBQUFsQyw0QkFBWTtvREFDVDtBQUNMLHNCQUFJLEVBQUUsWUFBWSxDQUFDLElBQUk7QUFDdkIsc0JBQUksRUFBRSxZQUFZLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxHQUFHLFNBQVMsR0FBRyxNQUFNO0FBQzdELHNCQUFJLEVBQUUsUUFBUSxDQUFDLFFBQVE7QUFDdkIseUJBQU8sRUFBRSxZQUFZLENBQUMsV0FBVztBQUNqQywwQkFBUSxFQUFFLFFBQVEsQ0FBQyxRQUFRO0FBQzNCLHdCQUFNLEVBQUUsWUFBWSxDQUFDLE1BQU07QUFDM0Isd0JBQU0sRUFBRSxZQUFZLENBQUMsTUFBTTtBQUMzQix1QkFBSyxFQUFFLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRztpQkFDMUI7Ozs7Ozs7U0FDRixDQUFDOzs7Ozs7Ozs7O0NBQ0wiLCJmaWxlIjoiNy5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIG5vcm1hbGl6ZU9yZGVyUG9zaXRpb25zKGN1c3RvbWVyT3JkZXJQb3NpdGlvbnMpIHtcbiAgcmV0dXJuIGF3YWl0KiBjdXN0b21lck9yZGVyUG9zaXRpb25zXG4gICAgLy8g0J/RgNC10L7QsdGA0LDQt9GD0LXQvCDQstC+INCy0L3Rg9GC0YDQtdC90L3QuNC5INGE0L7RgNC80LDRglxuICAgIC5tYXAoYXN5bmMgcG9zaXRpb24gPT4ge1xuICAgICAgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10Lwg0L/QsNGA0LDQu9C70LXQu9GM0L3Rg9GOINC30LDQs9GA0YPQt9C60YMg0L/QvtC70LXQuVxuICAgICAgbGV0IHBvc2l0aW9uR29vZCA9IGF3YWl0IHBvc2l0aW9uLmdvb2Q7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBwb3NpdGlvbkdvb2QubmFtZSxcbiAgICAgICAgdHlwZTogcG9zaXRpb25Hb29kLmluc3RhbmNlT2YoJ3NlcnZpY2UnKSA/ICdzZXJ2aWNlJyA6ICdnb29kJyxcbiAgICAgICAgdXVpZDogcG9zaXRpb24uZ29vZFV1aWQsXG4gICAgICAgIGFydGljbGU6IHBvc2l0aW9uR29vZC5wcm9kdWN0Q29kZSxcbiAgICAgICAgcXVhbnRpdHk6IHBvc2l0aW9uLnF1YW50aXR5LFxuICAgICAgICB3ZWlnaHQ6IHBvc2l0aW9uR29vZC53ZWlnaHQsXG4gICAgICAgIHZvbHVtZTogcG9zaXRpb25Hb29kLnZvbHVtZSxcbiAgICAgICAgcHJpY2U6IHBvc2l0aW9uLnByaWNlLnN1bSxcbiAgICAgIH07XG4gICAgfSk7XG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9ub3JtYWxpemUtb3JkZXItcG9zaXRpb25zLmpzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 8 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = normalizeOrderCustomer;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = __webpack_require__(1);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\n/**\n * Преобразует данные контрагента МойСклад к стандартному виду\n *\n * @param   {object} agent  контрагент\n * @returns {object}        нормализованный контрагент\n * @this                    sandbox\n */\n\nfunction normalizeOrderCustomer(agent) {\n  var fullName, phones, company, pushPhones;\n  return regeneratorRuntime.async(function normalizeOrderCustomer$(context$1$0) {\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        pushPhones = function pushPhones(phonesStr) {\n          if (phonesStr) {\n            var res = (0, _lodash2['default'])(phonesStr.split(',')).map(function (phone) {\n              if (phone) {\n                return phone.trim();\n              }\n            }).compact().value();\n            phones = _lodash2['default'].uniq(phones.concat(res));\n          }\n        };\n\n        fullName = agent.name;\n        phones = [];\n        company = undefined;\n\n        // Если физическое лицо ..\n        if (agent.companyType === 'FILI') {\n          // .. и если заполнено наименование ФЛ, то это полное имя\n          if (agent.requisite.legalTitle) {\n            fullName = agent.requisite.legalTitle;\n          }\n        }\n        // .. иначе ООО или ИП, значит нужно указать компанию\n        else {\n          company = agent.requisite.legalTitle;\n          // имя и телефон получателя пробуем получить из первого контакта контрагента\n          if (agent.contactPerson && agent.contactPerson.length) {\n            fullName = agent.contactPerson[0].name;\n            pushPhones(agent.contactPerson[0].phone);\n          }\n        }\n\n        // Добавляем основной телефон карточки в список\n        if (agent.contact.phones) {\n          pushPhones(agent.contact.phones);\n          pushPhones(agent.contact.faxes);\n        }\n\n        context$1$0.next = 8;\n        return regeneratorRuntime.awrap(this.parseAddress(agent.requisite.actualAddress));\n\n      case 8:\n        context$1$0.t0 = context$1$0.sent;\n        return context$1$0.abrupt('return', {\n          code: agent.code,\n          fullName: fullName,\n          company: company,\n          phones: phones,\n          email: agent.contact.email,\n          address: context$1$0.t0\n        });\n\n      case 10:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, this);\n}\n\nmodule.exports = exports['default'];\n\n// TODO Добавить проверку и нормализацию номеров телефонов//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbm9ybWFsaXplLW9yZGVyLWN1c3RvbWVyLmpzP2U3ODYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBUzhCLHNCQUFzQjs7OztrQ0FUcEMsQ0FBUTs7Ozs7Ozs7Ozs7O0FBU1QsU0FBZSxzQkFBc0IsQ0FBQyxLQUFLO01BQ3BELFFBQVEsRUFDUixNQUFNLEVBQ04sT0FBTyxFQUdGLFVBQVU7Ozs7QUFBVixrQkFBVSxZQUFWLFVBQVUsQ0FBQyxTQUFTLEVBQUU7QUFDN0IsY0FBSSxTQUFTLEVBQUU7QUFDYixnQkFBSSxHQUFHLEdBQUcseUJBQUUsU0FBUyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUM5QixHQUFHLENBQUMsZUFBSyxFQUFJO0FBQ1osa0JBQUksS0FBSyxFQUFFO0FBQ1QsdUJBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO2VBQ3JCO2FBQ0YsQ0FBQyxDQUNELE9BQU8sRUFBRSxDQUNULEtBQUssRUFBRSxDQUFDO0FBQ1gsa0JBQU0sR0FBRyxvQkFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1dBQ3JDO1NBQ0Y7O0FBakJHLGdCQUFRLEdBQUcsS0FBSyxDQUFDLElBQUk7QUFDckIsY0FBTSxHQUFHLEVBQUU7QUFDWCxlQUFPOzs7QUFrQlgsWUFBSSxLQUFLLENBQUMsV0FBVyxLQUFLLE1BQU0sRUFBRTs7QUFFaEMsY0FBSSxLQUFLLENBQUMsU0FBUyxDQUFDLFVBQVUsRUFBRTtBQUM5QixvQkFBUSxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDO1dBQ3ZDO1NBQ0Y7O2FBRUk7QUFDSCxpQkFBTyxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDOztBQUVyQyxjQUFJLEtBQUssQ0FBQyxhQUFhLElBQUksS0FBSyxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUU7QUFDckQsb0JBQVEsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztBQUN2QyxzQkFBVSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7V0FDMUM7U0FDRjs7O0FBR0QsWUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRTtBQUN4QixvQkFBVSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDakMsb0JBQVUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQ2pDOzs7d0NBUWdCLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUM7Ozs7O0FBTC9ELGNBQUksRUFBRSxLQUFLLENBQUMsSUFBSTtBQUNoQixrQkFBUSxFQUFSLFFBQVE7QUFDUixpQkFBTyxFQUFQLE9BQU87QUFDUCxnQkFBTSxFQUFOLE1BQU07QUFDTixlQUFLLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLO0FBQzFCLGlCQUFPOzs7Ozs7OztDQUVWIiwiZmlsZSI6IjguanMiLCJzb3VyY2VzQ29udGVudCI6WyIgIGltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbi8qKlxuICog0J/RgNC10L7QsdGA0LDQt9GD0LXRgiDQtNCw0L3QvdGL0LUg0LrQvtC90YLRgNCw0LPQtdC90YLQsCDQnNC+0LnQodC60LvQsNC0INC6INGB0YLQsNC90LTQsNGA0YLQvdC+0LzRgyDQstC40LTRg1xuICpcbiAqIEBwYXJhbSAgIHtvYmplY3R9IGFnZW50ICDQutC+0L3RgtGA0LDQs9C10L3RglxuICogQHJldHVybnMge29iamVjdH0gICAgICAgINC90L7RgNC80LDQu9C40LfQvtCy0LDQvdC90YvQuSDQutC+0L3RgtGA0LDQs9C10L3RglxuICogQHRoaXMgICAgICAgICAgICAgICAgICAgIHNhbmRib3hcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gbm9ybWFsaXplT3JkZXJDdXN0b21lcihhZ2VudCkge1xuICBsZXQgZnVsbE5hbWUgPSBhZ2VudC5uYW1lO1xuICBsZXQgcGhvbmVzID0gW107XG4gIGxldCBjb21wYW55O1xuXG4gIC8vIFRPRE8g0JTQvtCx0LDQstC40YLRjCDQv9GA0L7QstC10YDQutGDINC4INC90L7RgNC80LDQu9C40LfQsNGG0LjRjiDQvdC+0LzQtdGA0L7QsiDRgtC10LvQtdGE0L7QvdC+0LJcbiAgZnVuY3Rpb24gcHVzaFBob25lcyhwaG9uZXNTdHIpIHtcbiAgICBpZiAocGhvbmVzU3RyKSB7XG4gICAgICBsZXQgcmVzID0gXyhwaG9uZXNTdHIuc3BsaXQoJywnKSlcbiAgICAgICAgLm1hcChwaG9uZSA9PiB7XG4gICAgICAgICAgaWYgKHBob25lKSB7XG4gICAgICAgICAgICByZXR1cm4gcGhvbmUudHJpbSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmNvbXBhY3QoKVxuICAgICAgICAudmFsdWUoKTtcbiAgICAgIHBob25lcyA9IF8udW5pcShwaG9uZXMuY29uY2F0KHJlcykpO1xuICAgIH1cbiAgfVxuXG4gIC8vINCV0YHQu9C4INGE0LjQt9C40YfQtdGB0LrQvtC1INC70LjRhtC+IC4uXG4gIGlmIChhZ2VudC5jb21wYW55VHlwZSA9PT0gJ0ZJTEknKSB7XG4gICAgLy8gLi4g0Lgg0LXRgdC70Lgg0LfQsNC/0L7Qu9C90LXQvdC+INC90LDQuNC80LXQvdC+0LLQsNC90LjQtSDQpNCbLCDRgtC+INGN0YLQviDQv9C+0LvQvdC+0LUg0LjQvNGPXG4gICAgaWYgKGFnZW50LnJlcXVpc2l0ZS5sZWdhbFRpdGxlKSB7XG4gICAgICBmdWxsTmFtZSA9IGFnZW50LnJlcXVpc2l0ZS5sZWdhbFRpdGxlO1xuICAgIH1cbiAgfVxuICAvLyAuLiDQuNC90LDRh9C1INCe0J7QniDQuNC70Lgg0JjQnywg0LfQvdCw0YfQuNGCINC90YPQttC90L4g0YPQutCw0LfQsNGC0Ywg0LrQvtC80L/QsNC90LjRjlxuICBlbHNlIHtcbiAgICBjb21wYW55ID0gYWdlbnQucmVxdWlzaXRlLmxlZ2FsVGl0bGU7XG4gICAgLy8g0LjQvNGPINC4INGC0LXQu9C10YTQvtC9INC/0L7Qu9GD0YfQsNGC0LXQu9GPINC/0YDQvtCx0YPQtdC8INC/0L7Qu9GD0YfQuNGC0Ywg0LjQtyDQv9C10YDQstC+0LPQviDQutC+0L3RgtCw0LrRgtCwINC60L7QvdGC0YDQsNCz0LXQvdGC0LBcbiAgICBpZiAoYWdlbnQuY29udGFjdFBlcnNvbiAmJiBhZ2VudC5jb250YWN0UGVyc29uLmxlbmd0aCkge1xuICAgICAgZnVsbE5hbWUgPSBhZ2VudC5jb250YWN0UGVyc29uWzBdLm5hbWU7XG4gICAgICBwdXNoUGhvbmVzKGFnZW50LmNvbnRhY3RQZXJzb25bMF0ucGhvbmUpO1xuICAgIH1cbiAgfVxuXG4gIC8vINCU0L7QsdCw0LLQu9GP0LXQvCDQvtGB0L3QvtCy0L3QvtC5INGC0LXQu9C10YTQvtC9INC60LDRgNGC0L7Rh9C60Lgg0LIg0YHQv9C40YHQvtC6XG4gIGlmIChhZ2VudC5jb250YWN0LnBob25lcykge1xuICAgIHB1c2hQaG9uZXMoYWdlbnQuY29udGFjdC5waG9uZXMpO1xuICAgIHB1c2hQaG9uZXMoYWdlbnQuY29udGFjdC5mYXhlcyk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGNvZGU6IGFnZW50LmNvZGUsXG4gICAgZnVsbE5hbWUsXG4gICAgY29tcGFueSxcbiAgICBwaG9uZXMsXG4gICAgZW1haWw6IGFnZW50LmNvbnRhY3QuZW1haWwsXG4gICAgYWRkcmVzczogYXdhaXQgdGhpcy5wYXJzZUFkZHJlc3MoYWdlbnQucmVxdWlzaXRlLmFjdHVhbEFkZHJlc3MpLFxuICB9O1xufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvbm9ybWFsaXplLW9yZGVyLWN1c3RvbWVyLmpzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }
/******/ ]);
});

  }
  
  function discoverAMD(timeout, cb) {
  var guid = "70152108-2745-4c6a-b529-c4fe10e488a7";
function discover(key, handler) {
  var discoveredEventsIds = {};
  var publishEventName = guid + ':publish';
  var discoverEventName = guid + ':discover';
  var stop = function () {
    window.removeEventListener(publishEventName, listener);
  };
  var listener = function (e) {
    var ev = e.detail;
    if (ev && ev.id && ev.key === key && !discoveredEventsIds.hasOwnProperty(ev.id)) {
      discoveredEventsIds[ev.id] = true;
      handler(ev.value, stop);
    }
  };
  window.addEventListener(publishEventName, listener);
  window.dispatchEvent(new CustomEvent(discoverEventName, {
    detail: {
      key: key
    }
  }));
  // TODO Return only stop()
  return {
    stop: stop
  }
}
  var resolved = false;
  var disc = discover('amd:ready', function (data) {
    resolved = true;
    disc.stop();
    cb(null, data);
  });
  setTimeout(function () {
    if (!resolved) {
      disc.stop();
      cb(new Error('Waiting for AMD timeout'));
    }
  }, timeout);
}

  
  return {
    start: function(taistApi, entryPoint) {
      discoverAMD(15000, function (err, amd) {
        if (err) throw err;
        startModule(amd.define, taistApi, entryPoint);
      })
    }
  };
}